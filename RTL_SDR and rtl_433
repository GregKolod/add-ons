cd ~
# git install
sudo apt-get install git git-core cmake libusb-1.0-0-dev build-essential

git clone git://git.osmocom.org/rtl-sdr.git
cd rtl-sdr/ && mkdir build && cd build/
cmake ../ -DINSTALL_UDEV_RULES=ON
sudo make
sudo make install
sudo ldconfig
cd ~
sudo cp ./rtl-sdr/rtl-sdr.rules /etc/udev/rules.d/
sudo reboot

# create file no-rtl.conf
sudo nano /etc/modprobe.d/no-rtl.conf

# add these three lines
blacklist dvb_usb_rtl28xxu
blacklist rtl2832
blacklist rtl2830

sudo reboot
lsusb
rtl_test -t


#Build and install rtl_433

sudo apt-get install libtool libusb-1.0.0-dev librtlsdr-dev rtl-sdr doxygen
git clone https://github.com/merbanan/rtl_433.git
cd rtl_433/ && mkdir build &&
cd build && cmake ../ &&
make
sudo make install

#Test installation:
rtl_433

#The source for this tutorial is: https://sdr-setup-notes.readthedocs.io/en/latest/dev_rtlsdr.html#rtl-433-tool-setup

##Install supervisord

sudo apt-get install -y supervisor
sudo nano /etc/supervisor/conf.d/rtl_433.conf

#-----

[program:rtl_433]
command=/home/pi/rtl_433/build/src/rtl_433  -R 12 -R 19 -R 30 -R 35 -F "mqtt://localhost:1883,user=HA,pass=HomRas,events=$
user=pi
autostart=yes
autorestart=yes
startretries=100
stderr_logfile=/var/log/rtl_433/rtl_433.err.log
stdout_logfile=/var/log/rtl_433/rtl_433.log


#----

sudo mkdir /var/log/rtl_433

sudo service supervisor start

sudo service supervisor status

#If you changed the configuration file:

sudo supervisorctl reread



